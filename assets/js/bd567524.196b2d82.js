"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[1899],{3905:(e,n,a)=>{a.d(n,{Zo:()=>d,kt:()=>u});var t=a(7294);function i(e,n,a){return n in e?Object.defineProperty(e,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[n]=a,e}function s(e,n){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),a.push.apply(a,t)}return a}function r(e){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{};n%2?s(Object(a),!0).forEach((function(n){i(e,n,a[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):s(Object(a)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))}))}return e}function l(e,n){if(null==e)return{};var a,t,i=function(e,n){if(null==e)return{};var a,t,i={},s=Object.keys(e);for(t=0;t<s.length;t++)a=s[t],n.indexOf(a)>=0||(i[a]=e[a]);return i}(e,n);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(t=0;t<s.length;t++)a=s[t],n.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}var o=t.createContext({}),p=function(e){var n=t.useContext(o),a=n;return e&&(a="function"==typeof e?e(n):r(r({},n),e)),a},d=function(e){var n=p(e.components);return t.createElement(o.Provider,{value:n},e.children)},m={inlineCode:"code",wrapper:function(e){var n=e.children;return t.createElement(t.Fragment,{},n)}},h=t.forwardRef((function(e,n){var a=e.components,i=e.mdxType,s=e.originalType,o=e.parentName,d=l(e,["components","mdxType","originalType","parentName"]),h=p(a),u=i,c=h["".concat(o,".").concat(u)]||h[u]||m[u]||s;return a?t.createElement(c,r(r({ref:n},d),{},{components:a})):t.createElement(c,r({ref:n},d))}));function u(e,n){var a=arguments,i=n&&n.mdxType;if("string"==typeof e||i){var s=a.length,r=new Array(s);r[0]=h;var l={};for(var o in n)hasOwnProperty.call(n,o)&&(l[o]=n[o]);l.originalType=e,l.mdxType="string"==typeof e?e:i,r[1]=l;for(var p=2;p<s;p++)r[p]=a[p];return t.createElement.apply(null,r)}return t.createElement.apply(null,a)}h.displayName="MDXCreateElement"},5855:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>o,contentTitle:()=>r,default:()=>m,frontMatter:()=>s,metadata:()=>l,toc:()=>p});var t=a(7462),i=(a(7294),a(3905));const s={title:"Node Webserver Configuration",description:"Node Webserver Configuration",keywords:["node","webserver","configuration"]},r="Node Webserver Configuration",l={unversionedId:"installation/nodewebserver_config",id:"installation/nodewebserver_config",title:"Node Webserver Configuration",description:"Node Webserver Configuration",source:"@site/docs/installation/nodewebserver_config.md",sourceDirName:"installation",slug:"/installation/nodewebserver_config",permalink:"/docs/installation/nodewebserver_config",draft:!1,editUrl:"https://github.com/gyeeta/gyeeta.github.io/tree/main/docs/installation/nodewebserver_config.md",tags:[],version:"current",lastUpdatedAt:1668440029,formattedLastUpdatedAt:"Nov 14, 2022",frontMatter:{title:"Node Webserver Configuration",description:"Node Webserver Configuration",keywords:["node","webserver","configuration"]},sidebar:"docs",previous:{title:"Partha Agent Installation",permalink:"/docs/installation/partha_install"},next:{title:"Node Webserver Installation",permalink:"/docs/installation/nodewebserver_install"}},o={},p=[{value:"Listen Port",id:"listener-port",level:2},{value:"Shyama Hosts",id:"shyama-hosts",level:2},{value:"Shyama Ports",id:"shyama-ports",level:2},{value:"Web admin User Password",id:"web-admin-user-password",level:2},{value:"User Password Lookup File",id:"user-password-lookup-file",level:2},{value:"User Roles and Priviliges",id:"user-roles-and-priviliges",level:3},{value:"Login Token Expiry",id:"login-token-expiry",level:2},{value:"JWT Login Token Secret",id:"jwt-login-token-secret",level:2},{value:"Use HTTP",id:"use-http",level:2},{value:"TLS certificate File",id:"tls-certificate-file",level:2},{value:"TLS Private Key File",id:"tls-private-key-file",level:2},{value:"TLS Private Key Pass Phrase",id:"tls-private-key-pass-phrase",level:2},{value:"Sample Node Webserver env Config file",id:"sample-env",level:2},{value:"Sample User Password Lookup File",id:"sample-userpassfile",level:2}],d={toc:p};function m(e){let{components:n,...a}=e;return(0,i.kt)("wrapper",(0,t.Z)({},d,a,{components:n,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"node-webserver-configuration"},"Node Webserver Configuration"),(0,i.kt)("p",null,"Gyeeta uses NodeJS as a Webserver. The Node Webserver will connect to the Shyama Central Server and all Madhava\nIntermediate Servers. "),(0,i.kt)("p",null,"Node Webserver reads its config options as environment variables or from a .env environment variable file."),(0,i.kt)("p",null,"A sample Node Webserver .env config file is given ",(0,i.kt)("a",{parentName:"p",href:"#sample-env"},"below"),"."),(0,i.kt)("p",null,"The list of Config options include :"),(0,i.kt)("h2",{id:"listener-port"},"Listen Port"),(0,i.kt)("p",null,"The environment variable denoting the TCP port on which the Node Webserver will listen is indicated by ",(0,i.kt)("inlineCode",{parentName:"p"},"CFG_LISTENER_PORT"),"."),(0,i.kt)("p",null,"This field is mandatory."),(0,i.kt)("h2",{id:"shyama-hosts"},"Shyama Hosts"),(0,i.kt)("p",null,"This config param indicates the list of hostnames of the Shyama instances. The format\nof this param is a JSON array of one or more Shyama hostnames or IP addresses. "),(0,i.kt)("p",null,"This param is to be used along with ",(0,i.kt)("a",{parentName:"p",href:"#shyama-ports"},"Shyama Ports")," to indicate the Shyama servers."),(0,i.kt)("p",null,"If multiple Shyama instances are running due to High Availability, the number of elements in the\nJSON array will be more than 1. Under such cases, the Node Webserver instance will try connecting to only\nthe Active Shyama instance (Other instances being the Passive instances)."),(0,i.kt)("p",null,"The environment variable is ",(0,i.kt)("inlineCode",{parentName:"p"},"CFG_SHYAMA_HOSTS"),"."),(0,i.kt)("p",null,"This field is mandatory. "),(0,i.kt)("p",null,"The Hostnames or IP Addresses mentioned in this option must be same as the\n",(0,i.kt)("a",{parentName:"p",href:"./shyama_config#service-hostname"},"Shyama Server Service Hostname"),"."),(0,i.kt)("p",null,"Example usages : "),(0,i.kt)("p",null,'[ "shyamahost1.local" ]'," : Here a single instance of Shyama is specified."),(0,i.kt)("p",null,'[ "shyama1.local", "192.168.0.2" ]'," : Here 2 instances of Shyama are running in Active Passive mode."),(0,i.kt)("h2",{id:"shyama-ports"},"Shyama Ports"),(0,i.kt)("p",null,"This config param indicates the list of TCP ports of the Shyama instances. The format\nof this param is a JSON array of one or more Shyama TCP ports."),(0,i.kt)("p",null,"This param is to be used along with ",(0,i.kt)("a",{parentName:"p",href:"#shyama-hosts"},"Shyama Hosts")," to indicate the Shyama servers.\nThe number of elements in this JSON array must match the number of elements specified in\n",(0,i.kt)("a",{parentName:"p",href:"#shyama-hosts"},"Shyama Hosts"),". "),(0,i.kt)("p",null,"The Environment variable is ",(0,i.kt)("inlineCode",{parentName:"p"},"CFG_SHYAMA_PORTS"),"."),(0,i.kt)("p",null,"This field is mandatory."),(0,i.kt)("p",null,"The TCP Ports mentioned in this option must be same as the\n",(0,i.kt)("a",{parentName:"p",href:"./shyama_config#service-port"},"Shyama Server Service Port"),"."),(0,i.kt)("p",null,"Example usages :"),(0,i.kt)("p",null,"[ 10037 ]"," : Here a single instance of Shyama is specified."),(0,i.kt)("p",null,"[ 10037, 10037 ]"," : Here 2 instances of Shyama are running in Active Passive mode."),(0,i.kt)("h2",{id:"web-admin-user-password"},"Web admin User Password"),(0,i.kt)("p",null,"This config param indicates the password for the Web ",(0,i.kt)("inlineCode",{parentName:"p"},"admin")," user."),(0,i.kt)("p",null,"The Environment variable is ",(0,i.kt)("inlineCode",{parentName:"p"},"CFG_ADMINPASSWORD"),"."),(0,i.kt)("p",null,"The Web ",(0,i.kt)("inlineCode",{parentName:"p"},"admin")," user Password can be specified either in ",(0,i.kt)("inlineCode",{parentName:"p"},"CFG_ADMINPASSWORD")," or in the User Password Mapping file ",(0,i.kt)("inlineCode",{parentName:"p"},"CFG_USERPASSFILE"),".\nThe admin password in ",(0,i.kt)("inlineCode",{parentName:"p"},"CFG_ADMINPASSWORD")," is given preference in case ",(0,i.kt)("inlineCode",{parentName:"p"},"admin")," user password is also specified in ",(0,i.kt)("inlineCode",{parentName:"p"},"CFG_USERPASSFILE"),"."),(0,i.kt)("p",null,"This field is optional in case ",(0,i.kt)("inlineCode",{parentName:"p"},"CFG_USERPASSFILE")," is specified. If ",(0,i.kt)("inlineCode",{parentName:"p"},"CFG_USERPASSFILE")," is not specified, this field becomes mandatory."),(0,i.kt)("h2",{id:"user-password-lookup-file"},"User Password Lookup File"),(0,i.kt)("p",null,"This config param indicates the User Password Lookup file which provides the User, Password and Roles to use for the Web authentication."),(0,i.kt)("p",null,"This field is optional and becomes mandatory only if ",(0,i.kt)("inlineCode",{parentName:"p"},"CFG_ADMINPASSWORD")," is not specified."),(0,i.kt)("p",null,"The environment variable is ",(0,i.kt)("inlineCode",{parentName:"p"},"CFG_USERPASSFILE")," and the param needs to specify a valid file path."),(0,i.kt)("p",null,"The file itself needs to be in JSON Array format with each entry having fields ",(0,i.kt)("inlineCode",{parentName:"p"},"user"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"password")," or ",(0,i.kt)("inlineCode",{parentName:"p"},"pass_sha256")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"role"),"."),(0,i.kt)("p",null,"Please refer to sample ",(0,i.kt)("a",{parentName:"p",href:"#sample-userpassfile"},"User Password Lookup File"),"."),(0,i.kt)("h3",{id:"user-roles-and-priviliges"},"User Roles and Priviliges"),(0,i.kt)("p",null,"Currently the Webserver supports 3 basic User Roles : "),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("strong",{parentName:"p"},"admin")," : Administrator Role : Has all priviliges")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("strong",{parentName:"p"},"readwrite")," : ReadWrite Role "),(0,i.kt)("p",{parentName:"li"},"  The ReadWrite Role users cannot add/modify/delete Alert Actions (Notifications) and cannot invoke the reload of the User-Password Mapping file.")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("p",{parentName:"li"},(0,i.kt)("strong",{parentName:"p"},"readonly")," : ReadOnly Role"),(0,i.kt)("p",{parentName:"li"},"  All other users are assigned the ReadOnly Role. These users cannot add/modify/delete Alert Definitions, Silences, Inhibits in addition to the restrictions\nfor the ReadWrite Role users."))),(0,i.kt)("h2",{id:"login-token-expiry"},"Login Token Expiry"),(0,i.kt)("p",null,"This config param indicates the time after which the Web Authentication Token will expire and users will need to re-login\nto the Web UI or using REST APIs."),(0,i.kt)("p",null,"If not specified, the default time is '1d' (1 day)."),(0,i.kt)("p",null,"The Environment variable is ",(0,i.kt)("inlineCode",{parentName:"p"},"CFG_TOKENEXPIRY"),"."),(0,i.kt)("p",null,"This field is optional."),(0,i.kt)("h2",{id:"jwt-login-token-secret"},"JWT Login Token Secret"),(0,i.kt)("p",null,"This config param indicates the phrase to use as a Secret to sign the JWT Web Authentication Token. "),(0,i.kt)("p",null,"The Environment variable is ",(0,i.kt)("inlineCode",{parentName:"p"},"CFG_JWTSECRET"),"."),(0,i.kt)("p",null,"This field is mandatory."),(0,i.kt)("h2",{id:"use-http"},"Use HTTP"),(0,i.kt)("p",null,"The field indicates whether the Node Webserver will use HTTP instead of HTTPS."),(0,i.kt)("p",null,"The environment variable is ",(0,i.kt)("inlineCode",{parentName:"p"},"CFG_USEHTTP"),"."),(0,i.kt)("p",null,"The default value is ",(0,i.kt)("inlineCode",{parentName:"p"},"true")," (which indicates HTTP). If not specified but ",(0,i.kt)("inlineCode",{parentName:"p"},"CFG_TLSCERTFILE")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"CFG_TLSKEYFILE")," are\nspecfied, HTTPS is assumed."),(0,i.kt)("p",null,"This field is optional and allowed values are ",(0,i.kt)("inlineCode",{parentName:"p"},"true")," or ",(0,i.kt)("inlineCode",{parentName:"p"},"false"),"."),(0,i.kt)("h2",{id:"tls-certificate-file"},"TLS certificate File"),(0,i.kt)("p",null,"If ",(0,i.kt)("inlineCode",{parentName:"p"},"CFG_USEHTTP")," environment variable is ",(0,i.kt)("inlineCode",{parentName:"p"},"false"),", HTTPS is assumed."),(0,i.kt)("p",null,"This config specifies the path to a valid TLS Certificate file and the environment variable\nis ",(0,i.kt)("inlineCode",{parentName:"p"},"CFG_TLSCERTFILE")),(0,i.kt)("p",null,"This field is mandatory in case ",(0,i.kt)("inlineCode",{parentName:"p"},"USE_HTTP")," is false."),(0,i.kt)("h2",{id:"tls-private-key-file"},"TLS Private Key File"),(0,i.kt)("p",null,"If ",(0,i.kt)("inlineCode",{parentName:"p"},"CFG_USEHTTP")," environment variable is ",(0,i.kt)("inlineCode",{parentName:"p"},"false"),", HTTPS is assumed."),(0,i.kt)("p",null,"This config specifies the path to a valid TLS Private Key file and the environment variable\nis ",(0,i.kt)("inlineCode",{parentName:"p"},"CFG_TLSKEYFILE")),(0,i.kt)("p",null,"This field is mandatory in case ",(0,i.kt)("inlineCode",{parentName:"p"},"USE_HTTP")," is false."),(0,i.kt)("h2",{id:"tls-private-key-pass-phrase"},"TLS Private Key Pass Phrase"),(0,i.kt)("p",null,"If ",(0,i.kt)("inlineCode",{parentName:"p"},"CFG_USEHTTP")," environment variable is ",(0,i.kt)("inlineCode",{parentName:"p"},"false"),", HTTPS is assumed."),(0,i.kt)("p",null,"If the TLS Private Key is encypted using a Pass phrase, this option needs to be specified."),(0,i.kt)("p",null,"This config specifies the Pass Prase for TLS Private Key file and the environment variable\nis ",(0,i.kt)("inlineCode",{parentName:"p"},"CFG_TLSPASSPHRASE")),(0,i.kt)("p",null,"This field is optional."),(0,i.kt)("h2",{id:"sample-env"},"Sample Node Webserver env Config file"),(0,i.kt)("p",null,"A sample env config file is provided below :"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"\nCFG_SHYAMA_HOSTS='[ \"shyama1.local\" ]'\nCFG_SHYAMA_PORTS='[ 10037 ]'\n\nCFG_LISTENER_IP='0.0.0.0'\nCFG_LISTENER_PORT=10039\n\n# User Password file see sample_userpass.json. Users can also pass CFG_ADMINPASSWORD separately as well \n# and will take precedence over admin password in CFG_USERPASSFILE...\n\nCFG_ADMINPASSWORD='adminPassword'\nCFG_USERPASSFILE='/var/tmp/userpass.json'\n\nCFG_TOKENEXPIRY='1d'\nCFG_JWTSECRET='SecretPassForCookie'\n\n# Set CFG_USEHTTP=true for HTTP server and false for HTTPS\nCFG_USEHTTP=true\n\n# If CFG_USEHTTP=false, HTTPS will be used. Please specify CFG_TLSCERTFILE and CFG_TLSKEYFILE options\n# CFG_TLSCERTFILE=/var/tmp/cert.pem\n# CFG_TLSKEYFILE=/var/tmp/key.pem\n\n# If TLS Private Key is encrypted using Pass Phrase\n# CFG_TLSPASSPHRASE='TLSPassPhrase'\n\n# If log needs to be directed to a file\n# CFG_LOGFILE='/tmp/gyeeta_webserver.log'\n\n\n")),(0,i.kt)("p",null,"The above sample config specifies the Shyama server as a single instance located at shyama1.local:10037.\nIt also specifies the admin user Web UI password as adminPassword. The ",(0,i.kt)("inlineCode",{parentName:"p"},"CFG_USERPASSFILE")," specified\ngives the other login user details and their roles and needs to be a valid File path and the file\nneeds to be in a JSON format.  Sample User Password Lookup file is also given below as well."),(0,i.kt)("p",null,"In addition, the above env file specfies that the Webserver must use HTTP and not HTTPS."),(0,i.kt)("h2",{id:"sample-userpassfile"},"Sample User Password Lookup File"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json",metastring:'title="Sample User Password Lookup file in JSON format"',title:'"Sample',User:!0,Password:!0,Lookup:!0,file:!0,in:!0,JSON:!0,'format"':!0},'[\n    {\n        "user"      :   "admin",\n        "password"  :   "adminPassword",\n        "role"      :   [ "admin" ],\n    },\n    {\n        "user"      :   "user1",\n        "password"  :   "pass1",\n        "role"      :   [ "readonly" ]\n    },\n    {\n        "user"          :   "user2",\n        "pass_sha256"   :   "1ba3d16e9881959f8c9a9762854f72c6e6321cdd44358a10a4e939033117eab9",\n        "role"          :   [ "readwrite" ]\n    }\n]\n\n')),(0,i.kt)("p",null,"Users can specify the password directly in ",(0,i.kt)("inlineCode",{parentName:"p"},"password")," JSON field or the SHA256 of the password in ",(0,i.kt)("inlineCode",{parentName:"p"},"pass_sha256")," JSON field : ",(0,i.kt)("inlineCode",{parentName:"p"},"roles")," can be ",(0,i.kt)("inlineCode",{parentName:"p"},"admin"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"readonly"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"readwrite")),(0,i.kt)("p",null,"The above sample User Password Lookup file specifies 3 users which will have access to the Webserver : ",(0,i.kt)("inlineCode",{parentName:"p"},"admin"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"user1"),", ",(0,i.kt)("inlineCode",{parentName:"p"},"user2"),"."))}m.isMDXComponent=!0}}]);