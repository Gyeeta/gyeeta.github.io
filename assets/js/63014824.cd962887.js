"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[6052],{3905:(e,t,n)=>{n.d(t,{Zo:()=>c,kt:()=>u});var r=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=r.createContext({}),p=function(e){var t=r.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},c=function(e){var t=p(e.components);return r.createElement(s.Provider,{value:t},e.children)},h={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},d=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,s=e.parentName,c=o(e,["components","mdxType","originalType","parentName"]),d=p(n),u=a,m=d["".concat(s,".").concat(u)]||d[u]||h[u]||i;return n?r.createElement(m,l(l({ref:t},c),{},{components:n})):r.createElement(m,l({ref:t},c))}));function u(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,l=new Array(i);l[0]=d;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o.mdxType="string"==typeof e?e:a,l[1]=o;for(var p=2;p<i;p++)l[p]=n[p];return r.createElement.apply(null,l)}return r.createElement.apply(null,n)}d.displayName="MDXCreateElement"},8757:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>l,default:()=>h,frontMatter:()=>i,metadata:()=>o,toc:()=>p});var r=n(7462),a=(n(7294),n(3905));const i={id:"alertwalkthru",title:"Alerting Walkthrough",description:"Alerting Process Walkthrough"},l="Alerting Process Walkthrough",o={unversionedId:"alerts/alertwalkthru",id:"alerts/alertwalkthru",title:"Alerting Walkthrough",description:"Alerting Process Walkthrough",source:"@site/docs/alerts/alertwalkthru.md",sourceDirName:"alerts",slug:"/alerts/alertwalkthru",permalink:"/docs/alerts/alertwalkthru",draft:!1,editUrl:"https://github.com/gyeeta.github.io/tree/main/docs/alerts/alertwalkthru.md",tags:[],version:"current",lastUpdatedAt:1657016899,formattedLastUpdatedAt:"Jul 5, 2022",frontMatter:{id:"alertwalkthru",title:"Alerting Walkthrough",description:"Alerting Process Walkthrough"},sidebar:"docs",previous:{title:"Alerts Overview",permalink:"/docs/alerts/alertoverview"},next:{title:"Developer APIs",permalink:"/docs/category/developer-apis"}},s={},p=[],c={toc:p};function h(e){let{components:t,...n}=e;return(0,a.kt)("wrapper",(0,r.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"alerting-process-walkthrough"},"Alerting Process Walkthrough"),(0,a.kt)("p",null,"This section gives a walkthrough of the entire process involved in Gyeeta Alerting from the trigger to the resolution of the alert."),(0,a.kt)("p",null,"For the sake of simplicity, only Realtime Alerts are explained in this section. Most of the concepts will also apply to DB Aggregated Alerts."),(0,a.kt)("p",null,"Let us assume an Alert Definition has been set to fire an Alert if any ",(0,a.kt)("inlineCode",{parentName:"p"},"redis"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"mysql")," or ",(0,a.kt)("inlineCode",{parentName:"p"},"postgres")," service has states ",(0,a.kt)("inlineCode",{parentName:"p"},"Bad")," or ",(0,a.kt)("inlineCode",{parentName:"p"},"Severe")," over\n5 consecutive evaluations."),(0,a.kt)("admonition",{title:"Pre-Aggregation Filter for use with REST APIs for above condition",type:"tip"},(0,a.kt)("p",{parentName:"admonition"},(0,a.kt)("inlineCode",{parentName:"p"},"({ name in 'postgres','redis','mysql' } and { state in 'Bad','Severe' })"))),(0,a.kt)("p",null,"This alert is for ",(0,a.kt)("inlineCode",{parentName:"p"},"extsvcstate")," subsystem i.e. related to Service State. Gyeeta updates Service States every 5 sec in the ",(0,a.kt)("inlineCode",{parentName:"p"},"madhava")," Intermediate Servers. "),(0,a.kt)("p",null,"On every 5 sec Service State update, ",(0,a.kt)("inlineCode",{parentName:"p"},"madhava")," will check if the above filter expression matches any Service State. If\na match is found, ",(0,a.kt)("inlineCode",{parentName:"p"},"madhava")," will check the number of consecutive occurences of this alert for that specific Service. "),(0,a.kt)("p",null,"If it is the fifth occurence, then as per the Alert Definition, ",(0,a.kt)("inlineCode",{parentName:"p"},"madhava")," will then send a preliminary alert to ",(0,a.kt)("inlineCode",{parentName:"p"},"shyama")," Alertmanager."),(0,a.kt)("p",null,"The ",(0,a.kt)("inlineCode",{parentName:"p"},"shyama")," Alertmanager, on receiving this ",(0,a.kt)("em",{parentName:"p"},"pre-alert")," will check the following conditions which will cancel out (suppress) this alert :"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"Check if the Alert is Silenced as per this Alert Definition specific Silence Rules"),(0,a.kt)("li",{parentName:"ol"},"Check if ",(0,a.kt)("em",{parentName:"li"},"All")," Alerts are disabled which could be because of an Alert Storm"),(0,a.kt)("li",{parentName:"ol"},"Check if the Alert is Silenced as per Global Alerts Silencing Rules"),(0,a.kt)("li",{parentName:"ol"},"Check if the Alert is Inhibited because of a prior Alert as per Inhibition Rules")),(0,a.kt)("p",null,"If all checks passed, ",(0,a.kt)("inlineCode",{parentName:"p"},"shyama")," will check if the Alert Definition has ",(0,a.kt)("em",{parentName:"p"},"Grouping")," enabled. If ",(0,a.kt)("em",{parentName:"p"},"Grouping")," is enabled, the Alert is\npushed to the respective Alert Group. Thereafter, when the Group Wait period completes, the Alert will be become active."),(0,a.kt)("p",null,"If ",(0,a.kt)("em",{parentName:"p"},"Grouping")," is disabled, the Alert becomes Active. The ",(0,a.kt)("inlineCode",{parentName:"p"},"shyama")," Alertmanager will then send the new Alert to the remote\nAlert Action Agent. The Alert Action Agent will execute all the Actions (Notifications) set for that alert."),(0,a.kt)("p",null,"At this point, the Alert is Active and is also pushed to the ",(0,a.kt)("inlineCode",{parentName:"p"},"shyama")," ",(0,a.kt)("inlineCode",{parentName:"p"},"postgres")," DB. The Alert can also be seen in the Web UI Alerts Dashboard.\nIf the Alert was cancelled out due to any of the checks above, the Alert will not be visible in the UI nor will it be databased."),(0,a.kt)("p",null,"Now assume, the Alert Definition has set the Alert to be ",(0,a.kt)("em",{parentName:"p"},"Repeated")," if the Alert remains active for over 1 hour. "),(0,a.kt)("p",null,"Now, on every 5 sec Service State update, the corresponding ",(0,a.kt)("inlineCode",{parentName:"p"},"madhava")," instance will check the Alert Filter and set the Alert as active if the\ncondition keeps getting hit. "),(0,a.kt)("p",null,"Let us assume, the Alert condition is still active 1 hour after the initial alert. The corresponding ",(0,a.kt)("inlineCode",{parentName:"p"},"madhava")," instance will thereafter send a\n",(0,a.kt)("em",{parentName:"p"},"Repeat")," alert to ",(0,a.kt)("inlineCode",{parentName:"p"},"shyama"),". "),(0,a.kt)("p",null,"On receiving this ",(0,a.kt)("em",{parentName:"p"},"Repeat")," alert, ",(0,a.kt)("inlineCode",{parentName:"p"},"shyama")," will again evaluate all the Checks for cancelling and if the checks pass, will send the Repeat Alert\nto the remote Alert Action Agent for the next round of notifications."),(0,a.kt)("p",null,"Now let us assume, a Service State update is seen where the Alert filter expression failed for that specific service. The corresponding ",(0,a.kt)("inlineCode",{parentName:"p"},"madhava"),"\ninstance will thereafter mark this alert as ",(0,a.kt)("em",{parentName:"p"},"Resolved")," and will intimate the ",(0,a.kt)("inlineCode",{parentName:"p"},"shyama")," Alertmanager. "),(0,a.kt)("p",null,"On Alert Resolution, ",(0,a.kt)("inlineCode",{parentName:"p"},"shyama")," will update the DB and the Web UI will also show the Alert as ",(0,a.kt)("em",{parentName:"p"},"Resolved"),". If the Alert Definition specified\nsending of Notifications on Alert Resolution, then ",(0,a.kt)("inlineCode",{parentName:"p"},"shyama")," will send the notification to the Action Agent who will execute the action."),(0,a.kt)("p",null,"Each Alert Definition is associated with an Alert Expiry Duration (defaults to 10 hours and upto a max of 24 hours)."),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"shyama")," Alertmanager will periodicaly check for Alert Expiries on an expiry will mark that alert as ",(0,a.kt)("em",{parentName:"p"},"Expired")," and the DB updated. The Web UI will\nshow the Alert as ",(0,a.kt)("em",{parentName:"p"},"Expired"),". If the Alert Definition specified sending of Notifications on Alert Resolution, then ",(0,a.kt)("inlineCode",{parentName:"p"},"shyama")," will send the\nExpired Alert notification to the Action Agent who will execute the action."),(0,a.kt)("p",null,"If the Alert Definition had specified ",(0,a.kt)("em",{parentName:"p"},"Manual Alert Resolution")," instead of the default, auto resolution, then the ",(0,a.kt)("inlineCode",{parentName:"p"},"shyama")," Alertmanager will not\nset the Alert as ",(0,a.kt)("em",{parentName:"p"},"Resolved")," until users click on the ",(0,a.kt)("em",{parentName:"p"},"Set as Resolved")," button from the Web UI Alerts Dashboard or call the corresponding REST API call.\nAlert Expiry Rules will still be active for Manual Resolve Alerts as well."))}h.isMDXComponent=!0}}]);